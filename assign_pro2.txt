<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Employee Performance Dashboard — Demo</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Font (optional) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #f5f7fb;
      --card-bg: #ffffff;
      --text: #1f2d3d;
      --muted: #6c757d;
      --accent: #0d6efd;
      --radius: 12px;
      --shadow: 0 6px 18px rgba(18,38,63,0.06);
    }
    [data-theme="dark"]{
      --bg: #071023;
      --card-bg: #0f1724;
      --text: #e6eef8;
      --muted: #95a3b2;
      --accent: #66a1ff;
      --shadow: 0 8px 24px rgba(0,0,0,0.35);
    }

    html,body {
      height: 100%;
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Header */
    header.site-header{
      border-bottom: 1px solid rgba(0,0,0,0.04);
      padding: 0.9rem 1rem;
      background: linear-gradient(90deg, rgba(13,110,253,0.05), transparent);
    }
    .brand { font-weight:700; letter-spacing:0.2px; }

    /* Card styles */
    .kpi-card, .employee-card, .filters-card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(0,0,0,0.04);
    }
    .kpi-card { padding: 0.9rem; }
    .employee-card { padding: 1rem; cursor: pointer; }
    .filters-card { padding: 1rem; }

    .muted { color: var(--muted); }
    .small-muted { font-size: 0.85rem; color: var(--muted); }

    /* Progress height */
    .progress { height: 12px; border-radius: 8px; overflow: hidden; }

    /* Layout tweaks */
    main.container-fluid { padding-top: 1rem; padding-bottom: 2rem; }

    /* Employee details hidden by default */
    .employee-details { display: none; }

    /* Responsive adjustments */
    @media (max-width: 767.98px) {
      .controls .btn, .controls .form-control, .controls .form-select { width: 100%; margin-bottom: .5rem; }
      header.site-header { padding: .75rem; }
      .kpi-card h4 { font-size: 1.25rem; }
    }

    @media (min-width: 992px) {
      aside.filters { position: sticky; top: 1.25rem; }
    }

    /* subtle hover for employee card */
    .employee-card:hover { transform: translateY(-3px); transition: transform .18s ease; }
  </style>
</head>
<body data-theme="light">

  <header class="site-header d-flex align-items-center justify-content-between">
    <div class="d-flex align-items-center gap-3">
      <div class="brand fs-5">Company Dashboard</div>
      <small class="muted">Employee Performance · Q3</small>
    </div>

    <div class="d-flex align-items-center gap-2 controls" style="min-width:320px;">
      <input id="searchInput" class="form-control form-control-sm" placeholder="Search employee..." aria-label="Search employee" style="min-width:180px;">
      <select id="deptFilterTop" class="form-select form-select-sm" aria-label="Department filter" style="width: 160px;">
        <option value="">All Departments</option>
        <option>Engineering</option>
        <option>Sales</option>
        <option>Design</option>
        <option>HR</option>
      </select>
      <button id="themeToggle" class="btn btn-outline-secondary btn-sm" aria-pressed="false" title="Toggle theme">Dark</button>
    </div>
  </header>

  <main class="container-fluid">
    <div class="row g-4">
      <!-- Left side: main content -->
      <div class="col-12 col-xl-9">
        <!-- KPI row -->
        <div class="row g-3 mb-3">
          <div class="col-6 col-md-3">
            <div class="kpi-card">
              <div class="small-muted">Avg. Productivity</div>
              <div class="d-flex align-items-center justify-content-between">
                <h4 class="mb-0">78%</h4>
                <small class="small-muted">vs 72% last qtr</small>
              </div>
              <div class="progress mt-2" role="progressbar" aria-label="Average productivity">
                <div class="progress-bar" style="width:78%" aria-valuenow="78" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
          </div>

          <div class="col-6 col-md-3">
            <div class="kpi-card">
              <div class="small-muted">On-time Delivery</div>
              <h4 class="mb-0">91%</h4>
              <div class="progress mt-2" role="progressbar"><div class="progress-bar bg-success" style="width:91%"></div></div>
            </div>
          </div>

          <div class="col-6 col-md-3">
            <div class="kpi-card">
              <div class="small-muted">Cust. Satisfaction</div>
              <h4 class="mb-0">4.3 / 5</h4>
              <div class="progress mt-2"><div class="progress-bar bg-info" style="width:86%"></div></div>
            </div>
          </div>

          <div class="col-6 col-md-3">
            <div class="kpi-card">
              <div class="small-muted">Open Issues</div>
              <h4 class="mb-0">12</h4>
              <small class="small-muted">(down 4)</small>
            </div>
          </div>
        </div>

        <!-- Employees grid (rendered by JS) -->
        <section id="employeesGrid" class="row g-3" aria-live="polite">
          <!-- JS will inject employee cards here -->
        </section>
      </div>

      <!-- Right: filters -->
      <aside class="col-12 col-xl-3">
        <div class="filters-card mb-3">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <strong>Filters</strong>
            <a id="toggleFilters" class="small muted" role="button" aria-expanded="true">Collapse</a>
          </div>

          <div id="filtersBody">
            <div class="mb-2">
              <label for="deptFilter" class="form-label small mb-1">Department</label>
              <select id="deptFilter" class="form-select form-select-sm" aria-label="Department select">
                <option value="">Any</option>
                <option>Engineering</option>
                <option>Sales</option>
                <option>Design</option>
                <option>HR</option>
              </select>
            </div>

            <div class="mb-2">
              <label class="form-label small mb-1">Min Performance (%)</label>
              <input id="minPerf" type="range" min="0" max="100" value="0" class="form-range" aria-label="Minimum performance">
              <div class="d-flex justify-content-between small-muted">
                <span>0%</span><span id="minPerfVal">0%</span>
              </div>
            </div>

            <div class="mb-2">
              <label for="sortBy" class="form-label small mb-1">Sort by</label>
              <select id="sortBy" class="form-select form-select-sm" aria-label="Sort by">
                <option value="name">Name (A–Z)</option>
                <option value="performance">Performance (high→low)</option>
                <option value="department">Department</option>
              </select>
            </div>

            <div class="d-grid gap-2 mt-2">
              <button id="applyFilters" class="btn btn-primary btn-sm">Apply</button>
              <button id="resetFilters" class="btn btn-outline-secondary btn-sm">Reset</button>
            </div>
          </div>
        </div>

        <div class="filters-card">
          <strong>Legend</strong>
          <p class="small-muted mb-0">Click a card to expand details. Use filters to refine the list. Theme persists across reloads.</p>
        </div>
      </aside>
    </div>
  </main>

  <footer class="text-center py-3 small-muted">
    &copy; 2025 Company — Demo Dashboard
  </footer>

  <!-- jQuery + Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
  // -------- SAMPLE DATA (replace with API calls in production) --------
  const employeesData = [
    { id:1, name:"Asha Kumar", dept:"Engineering", performance:88, tasksCompleted:42, issues:1, notes:"Mentor for interns; strong code reviews." },
    { id:2, name:"Rahul Singh", dept:"Sales", performance:95, tasksCompleted:50, issues:0, notes:"Top seller in Q3; excellent client follow-ups." },
    { id:3, name:"Priya Nair", dept:"Design", performance:76, tasksCompleted:30, issues:3, notes:"Leading new UI toolkit development." },
    { id:4, name:"Vikram Patel", dept:"Engineering", performance:69, tasksCompleted:25, issues:6, notes:"Needs support for deadline planning." },
    { id:5, name:"Sneha Rao", dept:"HR", performance:82, tasksCompleted:20, issues:0, notes:"Outstanding onboarding feedback." },
    { id:6, name:"Kiran Das", dept:"Engineering", performance:91, tasksCompleted:48, issues:0, notes:"Consistent high performer." },
    { id:7, name:"Maya Iyer", dept:"Design", performance:84, tasksCompleted:35, issues:1, notes:"Improved design handoff process." }
  ];

  // -------- RENDERING --------
  function renderEmployees(list) {
    const container = document.getElementById('employeesGrid');
    container.innerHTML = '';

    if (!list.length) {
      container.innerHTML = '<div class="col-12"><div class="kpi-card text-center muted">No employees match the filters.</div></div>';
      return;
    }

    // Build using DocumentFragment for performance
    const frag = document.createDocumentFragment();

    list.forEach(emp => {
      const col = document.createElement('div');
      col.className = 'col-12 col-md-6 col-lg-4';

      col.innerHTML = `
        <div class="employee-card" data-id="${emp.id}" role="button" tabindex="0" aria-expanded="false">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <strong>${escapeHtml(emp.name)}</strong>
              <div class="small-muted">${escapeHtml(emp.dept)}</div>
            </div>
            <div class="text-end">
              <div class="h4 mb-0">${emp.performance}%</div>
              <div class="small-muted">Performance</div>
            </div>
          </div>

          <div class="mt-3">
            <div class="progress" aria-hidden="true"><div class="progress-bar" style="width:${emp.performance}%"></div></div>
          </div>

          <div class="employee-details mt-3 small-muted">
            <hr>
            <div>Tasks Completed: <strong>${emp.tasksCompleted}</strong></div>
            <div>Open Issues: <strong>${emp.issues}</strong></div>
            <div class="mt-1">Notes: <em>${escapeHtml(emp.notes)}</em></div>
            <div class="mt-2 d-flex gap-2">
              <button class="btn btn-sm btn-outline-primary view-profile">View Profile</button>
              <button class="btn btn-sm btn-outline-secondary send-msg">Message</button>
            </div>
